(()=>{function t(t,e){return $.post({url:t,data:JSON.stringify(e),contentType:"application/json"})}new Vue({el:"#app",data:{name:"",surname:"",phone:"",term:"",checked:!1,contacts:[],mainChecked:!1,isNameTextInvalid:!1,isSurnameTextInvalid:!1,isPhoneTextInvalid:!1,contactToDelete:null},created:function(){this.loadContacts()},methods:{isContactCheckboxChange:function(){this.mainChecked=!1},isMainCheckboxChange:function(){var t=!this.mainChecked;this.contacts.forEach((function(e){e.checked=t}))},loadContacts:function(){var t,e=this;("/api/getContacts",t={term:this.term},$.get({url:"/api/getContacts",data:t})).done((function(t){e.contacts=t})).fail((function(){alert("Ошибка при загрузке контактов")}))},showDeleteButtonConfirmDialog:function(t){this.contactToDelete=t,new bootstrap.Modal(this.$refs.deleteButtonConfirmDialog).show()},showDeleteCheckboxConfirmDialog:function(){new bootstrap.Modal(this.$refs.deleteCheckboxConfirmDialog).show()},deletedChecked:function(){var e=this.contacts.filter((function(t){return!0===t.checked})).map((function(t){return{id:t.id}})),n=this;t("/api/deleteContacts",e).done((function(t){t.success?n.loadContacts():alert(t.message)})).fail((function(){alert("Ошибка при удалении контакта")}))},deleteContact:function(){var e=this;t("/api/deleteContacts",[{id:this.contactToDelete.id}]).done((function(t){t.success?e.loadContacts():alert(t.message)})).fail((function(){alert("Ошибка при удалении контакта")}))},doValidation:function(t,e,n){var a=!1;return 0===t.length&&(this.isNameTextInvalid=!0,a=!0),0===e.length&&(this.isSurnameTextInvalid=!0,a=!0),0===n.length&&(this.isPhoneTextInvalid=!0,a=!0),a},createContact:function(){if(this.isNameTextInvalid=!1,this.isSurnameTextInvalid=!1,this.isPhoneTextInvalid=!1,!this.doValidation(this.name,this.surname,this.phone)){var e=this;t("/api/createContact",{name:this.name,surname:this.surname,phone:this.phone}).done((function(t){t.success?(e.loadContacts(),e.name="",e.surname="",e.phone=""):alert(t.message)})).fail((function(){alert("Ошибка при добавлении контакта")}))}}}})})();